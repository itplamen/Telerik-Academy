<!-- 03.By given an array of students, generate a table that represents these students
- Each student has first name, last name and grade
- Use jQuery -->

<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script src="../includes/jquery-2.1.3.min.js"></script>
    <style>
        #table-of-students {
            border-collapse: collapse;
            width: 500px;
            text-align: center;
        }

        #table-of-students, #table-of-students th, #table-of-students td {
            border: 1px solid black;
            padding: 20px;
        }

        #create-student {
            position: absolute;
            top: 8px;
            left: 550px;
        }
    </style>
</head>
<body>
    <table id="table-of-students">
        <thead>
            <tr>
                <th>First name</th>
                <th>Last name</th>
                <th>Grade</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <form id="create-student">
        <input type="text" id="first-name" placeholder="Enter first name ..."/>
        <input type="text" id="last-name" placeholder="Enter last name ..."/>
        <input type="text" id="grade" placeholder="Enter grade ..."/>
        <input type="button" id="add-new-student-btn" value="Add student"/>
    </form>

    <script>
        window.onload = function() {
            var students =
                    [
                        Student('Plamen', 'Georgiev', 6),
                        Student('Ivan', 'Ivanov', 2),
                        Student('Maria', 'Dimova', 3)
                    ];

            addStudentsToTable(students);

            $('#add-new-student-btn').on('click', function() {
                var $firstName = $('#first-name');
                var $lastName = $('#last-name');
                var $grade = $('#grade');

                if (checkFields($firstName, $lastName, $grade) === true) {
                    students.push(Student($firstName.val(), $lastName.val(), $grade.val()));
                    var $tr = $('<tr/>');
                    $tr.append('<td>' + $firstName.val() + '</td>' + '<td>' + $lastName.val() + '</td>' + '<td>' + $grade.val() + '</td>');
                    $('#table-of-students tbody').append($tr.fadeIn(1750));
                }
            });
        };

        function Student(firstName, lastName, grade){
            return {
                firstName: firstName,
                lastName: lastName,
                grade: grade
            };
        }

        function addStudentsToTable(students) {
            var $tbody = $('#table-of-students tbody');

            for (var item in students) {
                var $tr = $('<tr/>');

                for (var property in students[item]) {
                    $tr.append('<td>' + students[item][property] + '</td>');
                }

                $tbody.append($tr);
            }
        }

        function checkFields($firstName, $lastName, $grade) {
            if ($firstName.val() === '') {
                alert('Enter first name!');
            }
            else if ($lastName.val() === '') {
                alert('Enter last name!');
            }
            else if ($grade.val() === '') {
                alert('Enter grade!');
            }
            else if ($grade.val() < 2 || $grade.val() > 6) {
                alert('Enter valid grade between 2 and 6 !')
            }
            else {
                return true;
            }
        }
    </script>
</body>
</html>